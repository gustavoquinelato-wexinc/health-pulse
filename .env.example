# =============================================================================
# PULSE PLATFORM - CLEAN 3-DATABASE ARCHITECTURE CONFIGURATION (Phase 3)
# =============================================================================
# This file contains configuration for the clean 3-database architecture:
# - PostgreSQL Primary: Business data, AI configuration, write operations
# - PostgreSQL Replica: Read operations, analytics, dashboards
# - Qdrant: Vector storage ONLY, semantic search, client-isolated collections
# ðŸ”’ SECURITY: Contains shared configuration and secrets

# =============================================================================
# SYSTEM AUTHENTICATION - FOR AUTOMATED JOBS
# =============================================================================
# Credentials for system-level authentication (vectorization, automated jobs)
# Note: This is a dedicated system user that cannot be used for interactive login
SYSTEM_USER_EMAIL=system@etl.pulse.local
SYSTEM_USER_PASSWORD=your_secure_system_password

# =============================================================================
# DATABASE CONFIGURATION - POSTGRESQL PRIMARY
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_database_password
POSTGRES_DATABASE=pulse_db

# =============================================================================
# DATABASE CONFIGURATION - POSTGRESQL READ REPLICA
# =============================================================================
POSTGRES_REPLICA_HOST=localhost
POSTGRES_REPLICA_PORT=5433
# Note: Uses same user/password/database as primary

# =============================================================================
# DATABASE CONFIGURATION - QDRANT VECTOR DATABASE (Phase 3)
# =============================================================================
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_TIMEOUT=120

# =============================================================================
# DATABASE CONNECTION POOL SETTINGS - PRIMARY (Optimized for Long-Running Jobs)
# =============================================================================
DB_POOL_SIZE=20                    # Up from 5
DB_MAX_OVERFLOW=30                 # Up from 10
DB_POOL_TIMEOUT=60                 # Up from 30
DB_POOL_RECYCLE=900               # Reduced to 15 minutes for better connection health during long jobs

# =============================================================================
# DATABASE CONNECTION POOL SETTINGS - REPLICA (Optimized for Read Operations)
# =============================================================================
DB_REPLICA_POOL_SIZE=15           # Smaller for read operations
DB_REPLICA_MAX_OVERFLOW=20        # Less overflow needed for reads
DB_REPLICA_POOL_TIMEOUT=30        # Faster timeout for read queries

# =============================================================================
# DATABASE FEATURE FLAGS
# =============================================================================
USE_READ_REPLICA=true             # Enable/disable replica usage
REPLICA_FALLBACK_ENABLED=true     # Fallback to primary if replica fails

# =============================================================================
# INFRASTRUCTURE CONFIGURATION
# =============================================================================

# Cache Configuration (Redis)
REDIS_URL=redis://localhost:6379/0
CACHE_TTL_SECONDS=3600

# AI Provider Configuration (WrenAI-inspired)
DEFAULT_EMBEDDING_PROVIDER=sentence_transformers
DEFAULT_LLM_PROVIDER=azure_openai
AI_CACHE_TTL=3600
AI_BATCH_SIZE=100
AI_MAX_RETRIES=3

# Service Communication URLs
BACKEND_SERVICE_URL=http://localhost:3001
BACKEND_PORT=3001
BACKEND_HOST=localhost

ETL_SERVICE_URL=http://localhost:8000
ETL_PORT=8000
ETL_HOST=localhost



AUTH_SERVICE_URL=http://localhost:4000
AUTH_SERVICE_PORT=4000
AUTH_SERVICE_HOST=localhost

# Frontend App Settings
VITE_API_BASE_URL=http://localhost:3001
VITE_ETL_SERVICE_URL=http://localhost:8000

VITE_AUTH_SERVICE_URL=http://localhost:4000
VITE_APP_TITLE=Pulse Platform
VITE_ENVIRONMENT=development
VITE_ENABLE_REAL_TIME=true
VITE_ENABLE_AI_FEATURES=true

# Application Settings (Shared)
APP_VERSION=1.0.0
DEBUG=true
LOG_LEVEL=INFO
HOST=0.0.0.0
API_V1_STR=/api/v1

# Job Scheduling Configuration
SCHEDULER_TIMEZONE=America/Chicago

# Terminal Settings
FORCE_COLOR=1

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8000

# =============================================================================
# COOKIE CONFIGURATION
# =============================================================================
# Cookie domain for subdomain sharing
# Development: .localhost (shares across localhost:3000, localhost:8000, etc.)
# Production: .yourcompany.com (shares across app.yourcompany.com, etl.yourcompany.com, etc.)
COOKIE_DOMAIN=.localhost
COOKIE_SECURE=false
COOKIE_SAMESITE=lax

# =============================================================================
# DOCKER COMPOSE SETTINGS
# =============================================================================
COMPOSE_PROJECT_NAME=pulse-platform
DOCKER_BUILDKIT=1

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
ENABLE_CORS=true
ENABLE_SWAGGER=true

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT Configuration (Backend Service manages all JWT operations)
JWT_SECRET_KEY=your-super-secure-jwt-secret-key-here-32-chars-minimum
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# Session Configuration
SESSION_SECRET_KEY=your-session-secret-key-here
SESSION_EXPIRE_MINUTES=480

# General Security
SECRET_KEY=your-general-secret-key-here

# Encryption key for API tokens stored in database
ENCRYPTION_KEY=your-base64-encoded-encryption-key-here

# =============================================================================
# CLIENT CONFIGURATION
# =============================================================================

# Client name for ETL service (required for multi-instance setup)
CLIENT_NAME=YourCompanyName

# =============================================================================
# INTEGRATION CREDENTIALS & CONFIGURATION
# =============================================================================

# Jira Configuration (Your instance) - Required for AI coaching rules
JIRA_URL=https://yourcompany.atlassian.net
JIRA_USERNAME=your-email@yourcompany.com
JIRA_TOKEN=your-jira-api-token-here

# Jira Configuration for Augment Agent
JIRA_PROJECT_KEY_FOR_AUGMENT_AGENT=YOUR_PROJECT_KEY
JIRA_TEAM_FIELD_FOR_AUGMENT_AGENT=Team[Dropdown]
JIRA_TEAM_VALUE_FOR_AUGMENT_AGENT=Your Team Name

# Jira Workflow Configuration
JIRA_SUBTASK_WORKFLOW=Backlog,Development,Released
JIRA_STORY_WORKFLOW=Backlog,Refining,To Do,Development,Code review,Ready for Story Testing,Story Testing,Ready for Acceptance,Acceptance Testing,Ready for Production,Released
JIRA_EPIC_WORKFLOW=Backlog,Development,Deployed to Production,Released

# Jira Resolution Configuration
JIRA_STORY_RESOLUTION_REQUIRED=true
JIRA_SUCCESS_RESOLUTION=Done
JIRA_ABANDONED_RESOLUTION="Won't Do"

# GitHub Configuration (Used only during migration 0002)
GITHUB_TOKEN=your-github-personal-access-token-here

# WEX AI Gateway Configuration (WEX Internal) - Used only during migrations
WEX_AI_GATEWAY_BASE_URL=https://aips-ai-gateway.dev.ai-platform.int.wexfabric.com
WEX_AI_GATEWAY_API_KEY=your-ai-gateway-api-key-here
AI_MODEL=bedrock-claude-sonnet-4-v1
AI_FALLBACK_MODEL=azure-gpt-4o-mini

# NOTE: Other integration credentials (Aha!, Azure DevOps) are now stored
# in the database (integrations table) for security and centralized management.

# =============================================================================
# NOTES
# =============================================================================
# 1. This file contains shared configuration for all services
# 2. Replica settings enable read/write splitting for better performance
# 3. Connection pool settings are optimized for enterprise workloads
# 4. Feature flags allow gradual rollout of replica functionality
# 5. Never commit this file to version control in production
