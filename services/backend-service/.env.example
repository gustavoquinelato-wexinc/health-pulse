# =============================================================================
# PULSE PLATFORM - BACKEND SERVICE CONFIGURATION
# =============================================================================
# This file contains configuration for the Backend Service
# ðŸ”’ SECURITY: Contains service-specific configuration

# =============================================================================
# DATABASE CONFIGURATION - POSTGRESQL PRIMARY
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_database_password
POSTGRES_DATABASE=pulse_db

# =============================================================================
# DATABASE CONFIGURATION - POSTGRESQL READ REPLICA
# =============================================================================
POSTGRES_REPLICA_HOST=localhost
POSTGRES_REPLICA_PORT=5433
# Note: Uses same user/password/database as primary

# =============================================================================
# DATABASE CONFIGURATION - QDRANT VECTOR DATABASE (Phase 3)
# =============================================================================
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_TIMEOUT=120

# =============================================================================
# INFRASTRUCTURE CONFIGURATION
# =============================================================================

# Cache Configuration (Redis)
REDIS_URL=redis://localhost:6379/0
CACHE_TTL_SECONDS=3600

# AI Provider Configuration (WrenAI-inspired)
DEFAULT_EMBEDDING_PROVIDER=sentence_transformers
DEFAULT_LLM_PROVIDER=azure_openai
AI_CACHE_TTL=3600
AI_BATCH_SIZE=100
AI_MAX_RETRIES=3

# Service Communication URLs
BACKEND_SERVICE_URL=http://localhost:3001
BACKEND_PORT=3001
BACKEND_HOST=localhost

ETL_SERVICE_URL=http://localhost:8000
ETL_PORT=8000
ETL_HOST=localhost

AI_SERVICE_URL=http://localhost:8001
AI_SERVICE_PORT=8001
AI_SERVICE_HOST=localhost

AUTH_SERVICE_URL=http://localhost:4000
AUTH_SERVICE_PORT=4000
AUTH_SERVICE_HOST=localhost

# Application Settings
APP_VERSION=1.0.0
DEBUG=true
LOG_LEVEL=INFO
HOST=0.0.0.0
API_V1_STR=/api/v1

# =============================================================================
# JOB SCHEDULING CONFIGURATION
# =============================================================================
SCHEDULER_TIMEZONE=America/Chicago

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379/0
CACHE_TTL_SECONDS=3600

# =============================================================================
# TERMINAL SETTINGS
# =============================================================================
FORCE_COLOR=1

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8000

# =============================================================================
# COOKIE CONFIGURATION
# =============================================================================
# Cookie domain for subdomain sharing
# Development: .localhost (shares across localhost:3000, localhost:8000, etc.)
# Production: .yourcompany.com (shares across app.yourcompany.com, etl.yourcompany.com, etc.)
COOKIE_DOMAIN=.localhost
COOKIE_SECURE=false
COOKIE_SAMESITE=lax

# =============================================================================
# DOCKER COMPOSE SETTINGS
# =============================================================================
COMPOSE_PROJECT_NAME=pulse-platform
DOCKER_BUILDKIT=1

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/app.log

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
ENABLE_CORS=true
ENABLE_SWAGGER=true

# =============================================================================
# BACKEND SERVICE - ENVIRONMENT CONFIGURATION
# =============================================================================
# ðŸ”’ SECURITY: Contains Backend Service secrets ONLY
# Used by: Backend Service (authentication, user management)

# =============================================================================
# SERVICE IDENTIFICATION
# =============================================================================
APP_NAME=Pulse Backend Service
SERVICE_NAME=backend

# =============================================================================
# AUTHENTICATION & SECURITY SECRETS
# =============================================================================
# JWT Configuration (Backend Service manages all JWT operations)
JWT_SECRET_KEY=your-super-secure-jwt-secret-key-here-32-chars-minimum
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# Session Configuration
SESSION_SECRET_KEY=your-session-secret-key-here
SESSION_EXPIRE_MINUTES=480

# General Security
SECRET_KEY=your-general-secret-key-here

# Encryption key for API tokens stored in database (same as ETL service)
ENCRYPTION_KEY=your-base64-encoded-encryption-key-here

# =============================================================================
# BACKEND-SPECIFIC CONFIGURATION
# =============================================================================
# Rate limiting is hardcoded in main.py (100 req/60s)
# GitHub API rate limiting is handled automatically by the GitHub clients

# =============================================================================
# NOTES
# =============================================================================
# 1. This file contains ONLY Backend Service secrets
# 2. JWT_SECRET_KEY is used to sign and validate all platform JWT tokens
# 3. SESSION_SECRET_KEY is used for session management
# 4. These secrets should be different in production
# 5. Never commit this file to version control


# =============================================================================
# INTERNAL SERVICE COMMUNICATION (Backend â†’ ETL)
# =============================================================================
# Shared secret for internal cache invalidation calls to ETL
ETL_INTERNAL_SECRET=your-internal-secret-key-here
