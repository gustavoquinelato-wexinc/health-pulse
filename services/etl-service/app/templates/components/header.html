<!-- Modern Header Component -->
{% macro header(title='Pulse ETL Management', show_user_menu=true, show_theme_toggle=true) %}
<header class="modern-header flex items-center justify-between px-6">
    <!-- Logo and Title -->
    <div class="flex items-center space-x-4">
        <!-- WEX Logo -->
        <div class="h-8">
            <img src="/static/wex-logo-image.png" alt="WEX Logo" class="h-full object-contain">
        </div>

        <!-- Divider -->
        <div class="h-6 w-px" style="background-color: var(--border-color);"></div>

        <!-- Pulse Brand -->
        <div class="flex items-center space-x-2">
            <div class="w-8 h-8 flex items-center justify-center gradient-bg">
                <span class="text-sm font-bold" style="color: white !important;">P</span>
            </div>
            <div>
                <h1 class="text-lg font-semibold" style="color: var(--text-primary);">{{ title }}</h1>
            </div>
        </div>
    </div>

    <!-- Right Side Actions -->
    <div class="flex items-center space-x-4">
        {% if show_theme_toggle %}
        <!-- Theme Toggle -->
        <button onclick="toggleTheme()" class="p-2 rounded-lg transition-colors" style="background-color: var(--bg-tertiary);" title="Toggle Theme" onmouseover="this.style.backgroundColor='var(--bg-primary)'" onmouseout="this.style.backgroundColor='var(--bg-tertiary)'">
            <span id="theme-icon">ðŸŒ™</span>
        </button>
        {% endif %}

        {% if show_user_menu %}
        <!-- User Menu -->
        <div class="relative">
            <button onclick="toggleUserMenu(event)" class="flex items-center space-x-2 p-2 transition-colors" style="background-color: var(--bg-tertiary); border-radius: 0.5rem;" onmouseover="this.style.backgroundColor='var(--bg-primary)'" onmouseout="this.style.backgroundColor='var(--bg-tertiary)'">
                <div class="w-8 h-8 flex items-center justify-center" style="background: linear-gradient(135deg, var(--color-3), var(--color-4)); border-radius: 9999px;">
                    <span class="text-sm font-medium text-white" id="user-initials">U</span>
                </div>
                <span class="text-sm font-medium hidden md:block" style="color: var(--text-primary);" id="user-name">User</span>
            </button>

            <!-- User Dropdown -->
            <div id="user-menu" class="hidden absolute right-0 mt-2 w-64 p-2 space-y-1 shadow-lg z-50" style="border: 1px solid var(--border-color); background-color: var(--bg-secondary); border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); top: 100%; right: 0;">
                <div class="px-3 py-2" style="border-bottom: 1px solid var(--border-color);">
                    <p class="text-sm font-medium" style="color: var(--text-primary);" id="user-name-display">Loading...</p>
                    <p class="text-xs" style="color: var(--text-muted);" id="user-email-display">Loading...</p>
                    <p class="text-xs" style="color: var(--text-muted);" id="user-role-display">Loading...</p>
                </div>
                <button class="w-full text-left px-3 py-2 text-sm rounded-md transition-colors" style="color: var(--text-secondary);" onmouseover="this.style.backgroundColor='var(--bg-tertiary)'" onmouseout="this.style.backgroundColor='transparent'">
                    Profile Settings
                </button>
                <button class="w-full text-left px-3 py-2 text-sm rounded-md transition-colors" style="color: var(--text-secondary);" onmouseover="this.style.backgroundColor='var(--bg-tertiary)'" onmouseout="this.style.backgroundColor='transparent'">
                    Preferences
                </button>
                <hr style="border-color: var(--border-color);">
                <button onclick="logout()" class="w-full text-left px-3 py-2 text-sm rounded-md transition-colors" style="color: #ef4444;" onmouseover="this.style.backgroundColor='rgba(239, 68, 68, 0.1)'" onmouseout="this.style.backgroundColor='transparent'">
                    Sign Out
                </button>
            </div>
        </div>
        {% endif %}
    </div>
</header>
{% endmacro %}
