<!-- Modern Header Component -->
{% macro header(title='ETL', show_user_menu=true, show_theme_toggle=true, tenant_logo=none, tenant_name='Tenant') %}
<header class="modern-header header-enhanced flex items-center justify-between px-6">
    <!-- Left Side - Logo -->
    <div class="flex items-center space-x-4">
        {% if tenant_logo %}
            <img src="/static/assets/{{ tenant_logo }}" alt="{{ tenant_name }} Logo" class="h-8 object-contain" style="filter: brightness(0) invert(1);">
        {% else %}
            <img src="/static/logo.png" alt="{{ tenant_name }} Logo" class="h-8 object-contain" style="filter: brightness(0) invert(1);">
        {% endif %}
    </div>

    <!-- Center - Title -->
    <div class="flex-1 flex justify-center">
        <h1 class="text-xl font-bold text-white">{{ title }}</h1>
    </div>

    <!-- Right Side Actions -->
    <div class="flex items-center space-x-4">
        <!-- Pulse Icon -->
        <a id="pulse-link" href="http://localhost:3000/home" onclick="returnToDashboard(); return false;" class="p-2 rounded-lg transition-colors inline-block" style="background-color: rgba(255, 255, 255, 0.1);" title="Pulse" onmouseover="this.style.backgroundColor='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.backgroundColor='rgba(255, 255, 255, 0.1)'">
            <img src="/static/heart-pulse-fill-svgrepo-com.svg" alt="Pulse" width="20" height="20" style="filter: brightness(0) invert(1);">
        </a>

        {% if show_theme_toggle %}
        <!-- Theme Toggle -->
        <button onclick="toggleTheme()" class="p-2 rounded-lg transition-colors" style="background-color: rgba(255, 255, 255, 0.1);" title="Toggle Theme" onmouseover="this.style.backgroundColor='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.backgroundColor='rgba(255, 255, 255, 0.1)'">
            <i id="theme-icon" data-lucide="moon" class="w-5 h-5 text-white"></i>
        </button>
        {% endif %}

        {% if show_user_menu %}
        <!-- User Menu -->
        <div class="relative">
            <button onclick="toggleUserMenu(event)" class="flex items-center space-x-2 p-2 transition-colors rounded-lg" style="background-color: rgba(255, 255, 255, 0.1);" onmouseover="this.style.backgroundColor='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.backgroundColor='rgba(255, 255, 255, 0.1)'">
                <div class="w-8 h-8 flex items-center justify-center" style="background: linear-gradient(135deg, var(--color-3), var(--color-4)); border-radius: 9999px;">
                    <span class="text-sm font-medium" id="user-initials" style="color: var(--on-gradient-3-4);">U</span>
                </div>
                <span class="text-sm font-medium hidden md:block text-white" id="user-name">User</span>
            </button>

            <!-- User Dropdown -->
            <div id="user-menu" class="hidden absolute right-0 mt-2 w-64 p-2 space-y-1 shadow-lg z-50" style="border: 1px solid var(--border-color); background-color: var(--bg-secondary); border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); top: 100%; right: 0;">
                <div class="px-3 py-2" style="border-bottom: 1px solid var(--border-color);">
                    <p class="text-sm font-medium" style="color: var(--text-primary);" id="user-name-display">Loading...</p>
                    <p class="text-xs" style="color: var(--text-muted);" id="user-email-display">Loading...</p>
                    <p class="text-xs" style="color: var(--text-muted);" id="user-role-display">Loading...</p>
                </div>
                <button class="w-full text-left px-3 py-2 text-sm rounded-md transition-colors" style="color: var(--text-secondary);" onmouseover="this.style.backgroundColor='var(--bg-tertiary)'" onmouseout="this.style.backgroundColor='transparent'">
                    Profile Settings
                </button>
                <button class="w-full text-left px-3 py-2 text-sm rounded-md transition-colors" style="color: var(--text-secondary);" onmouseover="this.style.backgroundColor='var(--bg-tertiary)'" onmouseout="this.style.backgroundColor='transparent'">
                    Preferences
                </button>
                <hr style="border-color: var(--border-color);">
                <button onclick="logout()" class="w-full text-left px-3 py-2 text-sm rounded-md transition-colors" style="color: var(--status-error);" onmouseover="this.style.backgroundColor='rgba(var(--status-error-rgb), 0.1)'" onmouseout="this.style.backgroundColor='transparent'">
                    Sign Out
                </button>
            </div>
        </div>
        {% endif %}
    </div>
</header>
{% endmacro %}
