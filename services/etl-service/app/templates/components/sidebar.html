<!-- Modern Sidebar Component -->
{% macro sidebar(current_path='') %}
<aside class="modern-sidebar sidebar-container">
    <!-- Main Navigation -->
    <div class="flex-1 flex flex-col justify-center px-2">
        <div class="flex flex-col space-y-3">
        <!-- Home with Hover Submenu -->
        <div class="relative" id="home-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path == '/home' else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/home"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'home')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path == '/home' %}style="background: var(--gradient-1-2); color: var(--on-gradient-1-2);"{% endif %}>
                <i class="fas fa-home text-lg"></i>
            </a>
        </div>

        <!-- Integrations -->
        <div class="relative" id="integrations-menu">
            <a class="sidebar-nav-item nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path == '/integrations' else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/integrations"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'integrations')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path == '/integrations' %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2)); color: var(--on-gradient-1-2);"{% endif %}>
                <i class="fas fa-plug text-lg"></i>
            </a>
        </div>

        <!-- Work Item Types with Hover Submenu -->
        <div class="relative" id="wits-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path.startswith('/wits') else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/wits-hierarchies"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'wits')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path.startswith('/wits') %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2)); color: var(--on-gradient-1-2);"{% endif %}>
                <i class="fas fa-list-alt text-lg"></i>
            </a>
        </div>

        <!-- Statuses with Hover Submenu -->
        <div class="relative" id="statuses-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path.startswith('/statuses') or current_path.startswith('/workflow') else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/statuses-mappings"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'statuses')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path.startswith('/statuses') or current_path.startswith('/workflow') %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2)); color: var(--on-gradient-1-2);"{% endif %}>
                <i class="fas fa-sync-alt text-lg"></i>
            </a>
        </div>

        <!-- Admin (only for admin users) -->
        {% if user and user.role == 'admin' %}
        <div class="relative" id="admin-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path.startswith('/admin') else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/admin"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'admin')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path.startswith('/admin') %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2)); color: var(--on-gradient-1-2);"{% endif %}>
                <i class="fas fa-cog text-lg"></i>
            </a>
        </div>
        {% endif %}
        </div>
    </div>


</aside>

<!-- Sidebar Submenu Panels -->
<div id="submenu-home" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium" style="color: var(--text-primary);">
        Home
    </div>
</div>

<div id="submenu-integrations" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium" style="color: var(--text-primary);">
        Integrations
    </div>
</div>

<div id="submenu-wits" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium border-b" style="color: var(--text-primary); border-color: var(--border-color);">
        Work Item Types
    </div>
    <a href="/wits-hierarchies" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/wits-hierarchies' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/wits-hierarchies' %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2));"{% endif %}>
        <i class="fas fa-layer-group mr-2"></i>
        Hierarchies
    </a>
    <a href="/wits-mappings" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/wits-mappings' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/wits-mappings' %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2));"{% endif %}>
        <i class="fas fa-sitemap mr-2"></i>
        Mappings
    </a>
</div>

<div id="submenu-statuses" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium border-b" style="color: var(--text-primary); border-color: var(--border-color);">
        Statuses
    </div>
    <a href="/statuses-mappings" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/statuses-mappings' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/statuses-mappings' %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2));"{% endif %}>
        <i class="fas fa-exchange-alt mr-2"></i>
        Mappings
    </a>
    <a href="/workflows" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/workflows' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/workflows' %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2));"{% endif %}>
        <i class="fas fa-project-diagram mr-2"></i>
        Workflows
    </a>
</div>

<div id="submenu-admin" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium border-b" style="color: var(--text-primary); border-color: var(--border-color);">
        Admin
    </div>
    <a href="/admin" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/admin' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/admin' %}style="background: linear-gradient(to bottom right, var(--color-1), var(--color-2));"{% endif %}>
        <i class="fas fa-tachometer-alt mr-2"></i>
        Admin Panel
    </a>
</div>
{% endmacro %}

<!-- Sidebar JavaScript Functions -->
<script>
    // All sidebar functions are now in global scope (modern_layout.html)
</script>
