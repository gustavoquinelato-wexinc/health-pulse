<!-- Modern Sidebar Component -->
{% macro sidebar(current_path='') %}
<aside class="modern-sidebar sidebar-container">
    <!-- Main Navigation -->
    <div class="flex-1 flex flex-col justify-center px-2">
        <div class="flex flex-col space-y-3">
        <!-- Home with Hover Submenu -->
        <div class="relative" id="home-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path == '/home' else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/home"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'home')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path == '/home' %}style="background: var(--gradient-1-2) !important; color: var(--on-gradient-1-2) !important;"{% endif %}>
                <i data-lucide="home" class="w-5 h-5"></i>
            </a>
        </div>

        <!-- Work Item Types with Hover Submenu -->
        <div class="relative" id="wits-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path.startswith('/wits') else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/wits-hierarchies"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'wits')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path.startswith('/wits') %}style="background: var(--gradient-1-2) !important; color: var(--on-gradient-1-2) !important;"{% endif %}>
                <i data-lucide="list" class="w-5 h-5"></i>
            </a>
        </div>

        <!-- Statuses with Hover Submenu -->
        <div class="relative" id="statuses-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path.startswith('/statuses') or current_path.startswith('/workflow') else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/statuses-mappings"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'statuses')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path.startswith('/statuses') or current_path.startswith('/workflow') %}style="background: var(--gradient-1-2) !important; color: var(--on-gradient-1-2) !important;"{% endif %}>
                <i data-lucide="refresh-cw" class="w-5 h-5"></i>
            </a>
        </div>

        <!-- Integrations -->
        <div class="relative" id="integrations-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path == '/integrations' else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/integrations"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'integrations')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path == '/integrations' %}style="background: var(--gradient-1-2) !important; color: var(--on-gradient-1-2) !important;"{% endif %}>
                <i data-lucide="plug" class="w-5 h-5"></i>
            </a>
        </div>

        <!-- Qdrant Database -->
        <div class="relative" id="qdrant-menu">
            <a class="sidebar-nav-item sidebar-nav-item-with-submenu nav-item w-12 h-12 flex items-center justify-center mx-auto {{ 'nav-item-active' if current_path.startswith('/qdrant') else 'text-secondary hover:bg-tertiary hover:text-primary' }}"
                    href="/qdrant"
                    tabindex="0"
                    onmouseenter="showSubmenu(event, 'qdrant')"
                    onmouseleave="hideSubmenu()"
                    {% if current_path.startswith('/qdrant') %}style="background: var(--gradient-1-2); color: var(--on-gradient-1-2);"{% endif %}>
                <i data-lucide="database" class="w-5 h-5"></i>
            </a>
        </div>


        </div>
    </div>


</aside>

<!-- Sidebar Submenu Panels -->
<div id="submenu-home" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium" style="color: var(--text-primary);">
        Home
    </div>
</div>

<div id="submenu-integrations" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium" style="color: var(--text-primary);">
        Integrations
    </div>
</div>



<div id="submenu-wits" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium border-b" style="color: var(--text-primary); border-color: var(--border-color);">
        Work Item Types
    </div>
    <a href="/wits-hierarchies" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/wits-hierarchies' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/wits-hierarchies' %}style="background: var(--gradient-1-2);"{% endif %}>
        <i data-lucide="layers" class="w-4 h-4 mr-2"></i>
        Hierarchies
    </a>
    <a href="/wits-mappings" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/wits-mappings' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/wits-mappings' %}style="background: var(--gradient-1-2);"{% endif %}>
        <i data-lucide="network" class="w-4 h-4 mr-2"></i>
        Mappings
    </a>
</div>

<div id="submenu-statuses" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium border-b" style="color: var(--text-primary); border-color: var(--border-color);">
        Statuses
    </div>
    <a href="/statuses-mappings" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/statuses-mappings' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/statuses-mappings' %}style="background: var(--gradient-1-2);"{% endif %}>
        <i data-lucide="arrow-left-right" class="w-4 h-4 mr-2"></i>
        Mappings
    </a>
    <a href="/workflows" class="submenu-item flex items-center px-3 py-2 text-sm cursor-pointer transition-all duration-200 {{ 'text-white shadow-sm' if current_path == '/workflows' else 'hover:bg-tertiary hover:text-primary' }}"
       {% if current_path == '/workflows' %}style="background: var(--gradient-1-2);"{% endif %}>
        <i data-lucide="workflow" class="w-4 h-4 mr-2"></i>
        Workflows
    </a>
</div>

<div id="submenu-qdrant" class="submenu-panel fixed z-50 rounded-lg py-2 min-w-48 hidden"
     onmouseenter="keepSubmenuOpen()"
     onmouseleave="hideSubmenu()">
    <div class="px-3 py-2 text-sm font-medium" style="color: var(--text-primary);">
        Qdrant Database
    </div>
</div>

{% endmacro %}

<!-- Sidebar JavaScript Functions -->
<script>
    // All sidebar functions are now in global scope (modern_layout.html)
</script>
