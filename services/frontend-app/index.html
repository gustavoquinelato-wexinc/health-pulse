<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/heart-pulse.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pulse</title>
  <script>
    (function() {
      try {
        // Disable transitions during initial apply to prevent visual flash
        document.documentElement.classList.add('no-transitions');

        // Apply theme
        var theme = localStorage.getItem('pulse_theme') || 'light';
        document.documentElement.setAttribute('data-theme', theme);

        // Apply color schema mode
        var mode = localStorage.getItem('pulse_color_schema_mode') || 'default';
        document.documentElement.setAttribute('data-color-schema', mode);

        // Apply custom colors from localStorage if available
        if (mode === 'custom') {
          var saved = localStorage.getItem('pulse_colors');
          if (saved) {
            try {
              var colors = JSON.parse(saved);
              var root = document.documentElement.style;
              if (colors.color1) root.setProperty('--color-1', colors.color1);
              if (colors.color2) root.setProperty('--color-2', colors.color2);
              if (colors.color3) root.setProperty('--color-3', colors.color3);
              if (colors.color4) root.setProperty('--color-4', colors.color4);
              if (colors.color5) root.setProperty('--color-5', colors.color5);
            } catch (e) { /* ignore */ }
          }
        }

        // Re-enable transitions on next frame
        requestAnimationFrame(function() {
          document.documentElement.classList.remove('no-transitions');
        });
      } catch (e) { /* ignore */ }
    })();
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>